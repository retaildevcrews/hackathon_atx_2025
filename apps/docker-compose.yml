services:
  criteria_api:
    build: ./criteria_api
    container_name: criteria_api
    volumes:
      - ~/.azure:/root/.azure # Mount Azure CLI config
    env_file:
      - ./criteria_api/.env
    ports:
      - "8000:8000"
    depends_on:
      # Add CosmosDB emulator or other dependencies here if needed
      []
    restart: unless-stopped
  agent:
    build: ./agent
    container_name: agent
    env_file:
      - ./agent/.env
    environment:
      - CRITERIA_API_URL=http://criteria_api:8000
    ports:
      - "8001:8001"
    depends_on:
      - criteria_api
  webapp:
    build: ./webapp
    container_name: rubricx_webapp
    environment:
      - VITE_CRITERIA_API_URL=http://localhost:8000
    ports:
      - "5173:5173"
    depends_on:
      - criteria_api
